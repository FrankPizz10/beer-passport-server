generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "foreignKeys"
}

model beers {
  id         Int          @id @default(autoincrement())
  brewery_id Int          @default(0)
  breweries  breweries?   @relation(fields: [brewery_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_beers_brewery_id")
  name       String       @default("") @db.VarChar(255)
  cat_id     Int          @default(0)
  categories categories?  @relation(fields: [cat_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_beers_cat_id")
  style_id   Int          @default(0)
  styles     styles?      @relation(fields: [style_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_beers_style_id")
  abv        Float        @default(0) @db.Float
  ibu        Float        @default(0) @db.Float
  srm        Float        @default(0) @db.Float
  upc        Int          @default(0)
  filepath   String       @default("") @db.VarChar(255)
  descript   String       @db.Text
  add_user   Int          @default(0)
  last_mod   DateTime     @default(dbgenerated("'0000-00-00 00:00:00'")) @db.DateTime(0)
  user_beers user_beers[]

  @@index([brewery_id], map: "fk_beers_brewery_id")
  @@index([cat_id], map: "fk_beers_cat_id")
  @@index([style_id], map: "fk_beers_style_id")
}

model breweries {
  id       Int      @id @default(autoincrement())
  name     String   @default("") @db.VarChar(255)
  address1 String   @default("") @db.VarChar(255)
  address2 String   @default("") @db.VarChar(255)
  city     String   @default("") @db.VarChar(255)
  state    String   @default("") @db.VarChar(255)
  code     String   @default("") @db.VarChar(25)
  country  String   @default("") @db.VarChar(255)
  phone    String   @default("") @db.VarChar(50)
  website  String   @default("") @db.VarChar(255)
  filepath String   @default("") @db.VarChar(255)
  descript String   @db.Text
  add_user Int      @default(0)
  last_mod DateTime @default(dbgenerated("'0000-00-00 00:00:00'")) @db.DateTime(0)
  beers    beers[]
}

model breweries_geocode {
  id         Int    @id @default(autoincrement())
  brewery_id Int    @default(0)
  latitude   Float  @default(0) @db.Float
  longitude  Float  @default(0) @db.Float
  accuracy   String @default("") @db.VarChar(255)
}

model categories {
  id       Int      @id @default(autoincrement())
  cat_name String   @default("") @db.VarChar(255)
  last_mod DateTime @default(dbgenerated("'0000-00-00 00:00:00'")) @db.DateTime(0)
  beers    beers[]
}

model styles {
  id         Int      @id @default(autoincrement())
  cat_id     Int      @default(0)
  style_name String   @default("") @db.VarChar(255)
  last_mod   DateTime @default(dbgenerated("'0000-00-00 00:00:00'")) @db.DateTime(0)
  beers      beers[]
}

model user_beers {
  id         Int       @id @default(autoincrement())
  user_id    Int
  beer_id    Int
  tried      Boolean?  @default(false)
  liked      Boolean?  @default(false)
  created_at DateTime? @default(now()) @db.Timestamp(0)
  updated_at DateTime? @default(now()) @db.Timestamp(0)
  beers      beers     @relation(fields: [beer_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user_beers_beer_id")
  users      users     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user_beers_user_id")

  @@unique([user_id, beer_id])
  @@index([beer_id], map: "fk_user_beers_beer_id")
  @@index([user_id], map: "fk_user_beers_user_id")
}

model users {
  id         Int          @id @unique(map: "id") @default(autoincrement())
  uid        String       @unique(map: "uid") @db.VarChar(255)
  user_beers user_beers[]
}
